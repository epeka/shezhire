<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Шежіре — Дулат Тайпасы</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;900&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;0,700;1,300;1,400&display=swap" rel="stylesheet">
<style>

/* ══════════════════════════════════════
   TOKENS
══════════════════════════════════════ */
:root {
  --g1:#FDF8EC;--g2:#F5E8A8;--g3:#DFC05A;--g4:#C9A84C;
  --g5:#A8842A;--g6:#7A5C0F;--g7:#4A3508;
  --cream:#FDFAF2;--p1:#F6EDD5;--p2:#EDE0BC;--p3:#DFD0A0;
  --ink:#1A0C04;--brown:#5C3317;--mid:#8B5E3C;--light:#B8936A;
  --s1:rgba(201,168,76,.18);
  --tr:.35s cubic-bezier(.4,0,.2,1);
  --r:6px;
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{font-size:16px;scroll-behavior:smooth}

body{
  font-family:'Cormorant Garamond',Georgia,serif;
  background:#0F0804;
  background-image:
    radial-gradient(ellipse 70% 50% at 15% 0%,rgba(122,92,15,.22) 0%,transparent 60%),
    radial-gradient(ellipse 50% 60% at 85% 100%,rgba(74,53,8,.28) 0%,transparent 55%);
  color:var(--ink);min-height:100vh;overflow-x:hidden;
}
body::after{
  content:'';position:fixed;inset:0;
  background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='f'%3E%3CfeTurbulence baseFrequency='.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23f)' opacity='.03'/%3E%3C/svg%3E");
  pointer-events:none;z-index:0;
}

/* ══════════════════════════════════════
   ★ FIRE INTRO SCREEN ★
══════════════════════════════════════ */
#fire-screen{
  position:fixed;inset:0;z-index:9999;
  background:#0a0300;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  pointer-events:all;
  transition:opacity .9s ease,transform .9s ease;
}
#fire-screen.exit{
  opacity:0;transform:scale(1.04);
  pointer-events:none;
}
#fire-canvas{
  position:absolute;inset:0;width:100%;height:100%;
}
.fire-title-wrap{
  position:relative;z-index:2;
  text-align:center;pointer-events:none;
}
.fire-word{
  font-family:'Cinzel',serif;
  font-size:clamp(3.5rem,10vw,7rem);
  font-weight:900;
  letter-spacing:.18em;
  color:transparent;
  display:block;
  line-height:1;
  /* text fills with fire-gold */
  background:linear-gradient(180deg,#fff8e1 0%,#ffd54f 30%,#ff8f00 65%,#e65100 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  filter:drop-shadow(0 0 20px rgba(255,120,0,.9)) drop-shadow(0 0 60px rgba(255,60,0,.5));
  opacity:0;
  animation:fireWordIn 1.2s cubic-bezier(.2,.8,.3,1) 0.6s forwards;
}
.fire-sub{
  font-family:'Cinzel',serif;
  font-size:clamp(.7rem,2vw,.95rem);
  letter-spacing:.5em;
  color:rgba(255,220,120,.7);
  display:block;margin-top:14px;
  opacity:0;
  animation:fireSubIn .8s ease 1.4s forwards;
}
.fire-tap{
  font-family:'Cinzel',serif;
  font-size:.65rem;letter-spacing:.3em;
  color:rgba(255,180,60,.5);
  display:block;margin-top:32px;
  opacity:0;
  animation:fireTapIn .6s ease 2s forwards,fireTapPulse 2s ease 2.6s infinite;
  cursor:pointer;
  text-transform:uppercase;
}
@keyframes fireWordIn{
  0%{opacity:0;filter:drop-shadow(0 0 2px #ff6600) blur(12px);}
  40%{opacity:.8;filter:drop-shadow(0 0 40px rgba(255,100,0,1)) drop-shadow(0 0 80px rgba(255,50,0,.7)) blur(1px);}
  100%{opacity:1;filter:drop-shadow(0 0 20px rgba(255,120,0,.9)) drop-shadow(0 0 60px rgba(255,60,0,.5)) blur(0);}
}
@keyframes fireSubIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
@keyframes fireTapIn{from{opacity:0}to{opacity:.7}}
@keyframes fireTapPulse{0%,100%{opacity:.35}50%{opacity:.8}}

/* ══════════════════════════════════════
   TOPBAR
══════════════════════════════════════ */
.topbar{
  position:fixed;top:0;left:0;right:0;z-index:900;
  display:flex;align-items:center;justify-content:center;
  height:50px;
  background:rgba(15,8,4,.9);
  backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);
  border-bottom:1px solid rgba(201,168,76,.25);
}
.topbar-inner{
  display:flex;align-items:center;gap:6px;
  padding:0 24px;width:100%;max-width:1060px;
  justify-content:space-between;
}
.tb-group{display:flex;align-items:center;gap:5px;}
.tb-label{
  font-family:'Cinzel',serif;font-size:.58rem;letter-spacing:.28em;
  color:var(--g4);opacity:.6;margin-right:4px;
}
.tb-btn{
  font-family:'Cinzel',serif;font-size:.68rem;font-weight:600;
  letter-spacing:.12em;color:var(--g2);background:transparent;
  border:1px solid rgba(201,168,76,.22);border-radius:30px;
  padding:5px 14px;cursor:pointer;transition:var(--tr);opacity:.55;
}
.tb-btn:hover{opacity:.9;border-color:var(--g4);}
.tb-btn.active{background:var(--g6);border-color:var(--g4);color:var(--g1);opacity:1;box-shadow:0 0 14px rgba(201,168,76,.3);}

/* ══════════════════════════════════════
   PAGE & FRAME
══════════════════════════════════════ */
.page{position:relative;z-index:1;max-width:1040px;margin:0 auto;padding:76px 20px 80px;}
.frame{
  background:var(--cream);padding:70px 68px 72px;border-radius:2px;
  box-shadow:0 0 0 1.5px var(--g5),0 0 0 9px #0F0804,0 0 0 11px var(--g4),
    0 0 0 13px #0F0804,0 0 80px 16px rgba(201,168,76,.15),0 30px 100px rgba(15,8,4,.7);
  position:relative;
}
.corner{position:absolute;width:88px;height:88px;pointer-events:none;}
.corner.tl{top:10px;left:10px}
.corner.tr{top:10px;right:10px;transform:scaleX(-1)}
.corner.bl{bottom:10px;left:10px;transform:scaleY(-1)}
.corner.br{bottom:10px;right:10px;transform:scale(-1,-1)}

.orn-band{display:flex;align-items:center;gap:14px;margin:0 auto;max-width:560px;}
.orn-band span{flex:1;height:1px;background:linear-gradient(to right,transparent,var(--g4),transparent);}
.orn-band em{color:var(--g4);font-style:normal;letter-spacing:.3em;}

/* ══════════════════════════════════════
   HEADER
══════════════════════════════════════ */
.header{text-align:center;margin-bottom:44px;}
.header-eyebrow{
  font-family:'Cinzel',serif;font-size:.6rem;letter-spacing:.5em;
  color:var(--g5);display:block;margin-bottom:16px;text-transform:uppercase;
}
.header-title{
  font-family:'Cinzel',serif;font-size:clamp(3rem,6vw,5rem);
  font-weight:900;letter-spacing:.1em;line-height:1;
  background:linear-gradient(160deg,var(--ink) 0%,var(--brown) 60%,var(--g5) 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.header-sub{
  font-family:'Cinzel',serif;font-size:clamp(.7rem,1.6vw,.85rem);
  font-weight:400;color:var(--g5);letter-spacing:.32em;margin-top:10px;display:block;
}
.header-lineage{
  font-family:'Cinzel',serif;font-size:.68rem;letter-spacing:.22em;
  color:var(--mid);margin-top:5px;display:block;
}

/* ══════════════════════════════════════
   INTRO
══════════════════════════════════════ */
.intro{
  position:relative;margin:38px 0 50px;padding:28px 52px 32px;
  background:var(--p1);border-top:1.5px solid var(--g4);border-bottom:1.5px solid var(--g4);
  text-align:center;
}
.intro::before{content:'\201C';font-size:6rem;line-height:.5;color:var(--g2);
  position:absolute;top:14px;left:12px;font-family:'Cormorant Garamond',serif;}
.intro::after{content:'\201D';font-size:6rem;line-height:.5;color:var(--g2);
  position:absolute;bottom:-2px;right:12px;font-family:'Cormorant Garamond',serif;}
.intro-main{font-size:clamp(1rem,1.9vw,1.14rem);font-style:italic;color:var(--brown);line-height:2;display:block;}
.intro-note{font-size:.84rem;color:var(--mid);font-style:italic;margin-top:10px;display:block;line-height:1.8;}
.intro-proverb{
  display:inline-block;margin-top:18px;font-family:'Cinzel',serif;font-size:.68rem;
  letter-spacing:.2em;color:var(--g5);border:1px solid var(--g3);border-radius:30px;padding:5px 20px;
}

/* ══════════════════════════════════════
   SECTION LABEL
══════════════════════════════════════ */
.sec-label{
  font-family:'Cinzel',serif;font-size:.62rem;letter-spacing:.28em;
  color:var(--g5);text-align:center;margin:52px 0 32px;
}
.sec-label::after{content:'';display:block;width:60px;height:1px;background:var(--g4);margin:8px auto 0;}

/* ══════════════════════════════════════
   GEN PILL
══════════════════════════════════════ */
.gpill{
  font-family:'Cinzel',serif;font-size:.55rem;letter-spacing:.18em;
  color:var(--g5);background:var(--p2);border:1px solid var(--g3);
  border-radius:20px;padding:2px 10px;display:inline-block;margin-bottom:5px;
}

/* ══════════════════════════════════════
   NAME CARD
══════════════════════════════════════ */
.card{
  background:var(--p1);border:1.5px solid var(--g3);border-radius:var(--r);
  padding:11px 22px;text-align:center;position:relative;cursor:pointer;
  transition:box-shadow var(--tr),transform var(--tr),border-color var(--tr),background var(--tr);
  min-width:155px;user-select:none;
}
.card:hover{box-shadow:0 8px 28px var(--s1),0 0 0 1px var(--g4);transform:translateY(-3px);border-color:var(--g4);}
.card:active{transform:translateY(-1px);}
.card .kz{font-size:1.08rem;font-weight:600;color:var(--ink);display:block;line-height:1.25;}
.card .lat{font-size:.74rem;font-style:italic;color:var(--mid);display:block;margin-top:2px;}

.card.root{border-color:var(--g5);border-width:2px;background:linear-gradient(145deg,#fdf4cc,var(--p1));box-shadow:0 6px 24px var(--s1);min-width:190px;}
.card.root .kz{font-size:1.35rem;}
.card.root::before{content:'✦';position:absolute;top:-11px;left:50%;transform:translateX(-50%);background:var(--cream);padding:0 8px;color:var(--g4);font-size:.9rem;}
.card.father{border-color:var(--brown);background:linear-gradient(145deg,var(--p1),var(--cream));min-width:148px;}
.card.leaf{border-color:var(--g2);background:var(--cream);min-width:118px;padding:9px 14px;}
.card.leaf .kz{font-size:.95rem;}
.card.reciting{border-color:var(--g4)!important;background:linear-gradient(145deg,#fdf0b0,var(--p1))!important;box-shadow:0 0 0 3px rgba(201,168,76,.3),0 8px 32px rgba(201,168,76,.25)!important;transform:translateY(-3px)!important;}
.card.dimmed{opacity:.25;filter:grayscale(.5);}

/* ══════════════════════════════════════
   CONNECTORS
══════════════════════════════════════ */
.cv{width:2px;background:linear-gradient(to bottom,var(--g4),var(--g3));margin:0 auto;border-radius:2px;}
.ch{height:2px;background:linear-gradient(to right,var(--g3),var(--g4),var(--g3));border-radius:2px;}

/* ══════════════════════════════════════
   VERTICAL TREE
══════════════════════════════════════ */
.tree-col{display:flex;flex-direction:column;align-items:center;}
.anc-row{display:flex;flex-direction:column;align-items:center;}
.fork-bar{display:flex;align-items:center;justify-content:center;width:100%;}
.fork-arm-l{flex:1;height:2px;background:linear-gradient(to right,transparent,var(--g3));}
.fork-arm-r{flex:1;height:2px;background:linear-gradient(to left,transparent,var(--g3));}
.fork-tick{width:2px;height:26px;background:var(--g4);border-radius:2px;}
.branch-spread{display:flex;justify-content:center;align-items:flex-start;gap:44px;flex-wrap:wrap;width:100%;}
.branch-col{display:flex;flex-direction:column;align-items:center;flex:1;min-width:155px;max-width:230px;}
.branch-tag{font-family:'Cinzel',serif;font-size:.56rem;letter-spacing:.16em;color:var(--mid);font-style:italic;margin-bottom:4px;text-align:center;}
.children-row{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;}
.sub-fork{display:flex;align-items:center;justify-content:center;margin:0 auto;}
.sf-l{flex:1;height:1.5px;background:linear-gradient(to right,transparent,var(--g2));}
.sf-r{flex:1;height:1.5px;background:linear-gradient(to left,transparent,var(--g2));}
.sf-t{width:1.5px;height:16px;background:var(--g3);border-radius:2px;}

/* ══════════════════════════════════════
   HORIZONTAL TREE
══════════════════════════════════════ */
.htree{background:var(--p1);border:1px solid var(--g3);border-radius:6px;padding:30px 34px;overflow-x:auto;}
.htree pre{font-family:'Courier New',Consolas,monospace;font-size:.8rem;line-height:2.1;color:var(--ink);white-space:pre;}
.hg{color:var(--g5);font-weight:700;}.hn{color:var(--ink);font-weight:600;}.hl{color:var(--mid);font-style:italic;}
.hr{color:var(--g3);}.hnt{color:var(--light);font-style:italic;font-size:.74rem;}

/* ══════════════════════════════════════
   ★ RECITATION MODAL ★
══════════════════════════════════════ */
.recit-backdrop{
  display:none;position:fixed;inset:0;z-index:800;
  align-items:center;justify-content:center;
}
.recit-backdrop.open{display:flex;animation:bdFade .4s ease both;}
@keyframes bdFade{from{opacity:0;backdrop-filter:blur(0px);}to{opacity:1;backdrop-filter:blur(8px);}}
.recit-backdrop.open{background:rgba(10,5,2,.82);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);}

.recit-panel{
  position:relative;background:var(--p1);max-width:680px;width:90%;
  max-height:88vh;overflow-y:auto;border-radius:4px;
  box-shadow:0 0 0 1.5px var(--g5),0 0 0 8px rgba(10,5,2,.8),0 0 0 9.5px var(--g4),0 40px 100px rgba(10,5,2,.9);
  animation:panelUp .45s cubic-bezier(.2,.85,.4,1) both;
}
@keyframes panelUp{from{opacity:0;transform:translateY(40px) scale(.96)}to{opacity:1;transform:none}}
.recit-inner{padding:52px 52px 44px;}

.recit-corner{position:absolute;width:56px;height:56px;pointer-events:none;}
.recit-corner.tl{top:6px;left:6px}.recit-corner.tr{top:6px;right:6px;transform:scaleX(-1)}
.recit-corner.bl{bottom:6px;left:6px;transform:scaleY(-1)}.recit-corner.br{bottom:6px;right:6px;transform:scale(-1,-1)}

.recit-close{
  position:absolute;top:16px;right:18px;background:transparent;
  border:1px solid var(--g3);border-radius:50%;width:32px;height:32px;
  cursor:pointer;font-family:'Cinzel',serif;font-size:.7rem;color:var(--g5);
  display:flex;align-items:center;justify-content:center;transition:var(--tr);
}
.recit-close:hover{background:var(--g4);color:var(--cream);border-color:var(--g4);}

.recit-tag{font-family:'Cinzel',serif;font-size:.58rem;letter-spacing:.3em;color:var(--g5);text-align:center;display:block;margin-bottom:18px;}
.recit-name{font-family:'Cinzel',serif;font-size:clamp(1.5rem,3vw,2rem);font-weight:700;color:var(--ink);text-align:center;display:block;margin-bottom:4px;}
.recit-name-lat{font-family:'Cinzel',serif;font-size:.78rem;letter-spacing:.2em;color:var(--mid);text-align:center;display:block;margin-bottom:28px;}

.recit-scroll-area{position:relative;padding:24px 0 0;border-top:1px solid var(--g3);}
.recit-text{font-size:clamp(1rem,1.8vw,1.12rem);line-height:2.1;color:var(--brown);font-style:italic;text-align:center;display:block;}
.recit-line{display:block;opacity:0;transform:translateY(8px);transition:opacity .4s ease,transform .4s ease;padding:2px 0;}
.recit-line.show{opacity:1;transform:none;}
.recit-line .gen-num{font-family:'Cinzel',serif;font-size:.58rem;letter-spacing:.18em;color:var(--g5);margin-right:6px;font-style:normal;vertical-align:middle;}
.recit-line .anc-name{font-weight:600;color:var(--ink);font-style:normal;}
.recit-line .anc-lat{color:var(--light);font-size:.82rem;margin-left:4px;}
.recit-arrow{display:block;text-align:center;color:var(--g3);font-size:.9rem;opacity:0;transition:opacity .3s ease .1s;line-height:1.2;padding:0;}
.recit-arrow.show{opacity:1;}
.recit-endpoint{display:block;text-align:center;margin-top:20px;padding-top:18px;border-top:1px dashed var(--g3);font-family:'Cinzel',serif;font-size:.65rem;letter-spacing:.22em;color:var(--g5);opacity:0;transition:opacity .5s ease;}
.recit-endpoint.show{opacity:1;}

.recit-lang-bar{display:flex;gap:4px;justify-content:center;margin-bottom:20px;}
.rltab{font-family:'Cinzel',serif;font-size:.6rem;letter-spacing:.14em;border:1px solid var(--g3);border-radius:20px;padding:3px 12px;background:transparent;color:var(--mid);cursor:pointer;transition:var(--tr);}
.rltab.active{background:var(--g6);border-color:var(--g4);color:var(--g1);}
.recit-lang-content{display:none;}
.recit-lang-content.active{display:block;}

/* ══════════════════════════════════════
   HINT PULSE
══════════════════════════════════════ */
.hint-pulse{text-align:center;margin:8px 0 0;font-family:'Cinzel',serif;font-size:.6rem;letter-spacing:.2em;color:var(--g4);animation:hpulse 2.5s ease-in-out infinite;}
@keyframes hpulse{0%,100%{opacity:.3}50%{opacity:.85}}

/* ══════════════════════════════════════
   CLOSING
══════════════════════════════════════ */
.closing{margin-top:60px;text-align:center;border-top:1px solid var(--p3);padding-top:38px;}
.closing-main{font-size:clamp(1rem,2vw,1.15rem);font-weight:600;color:var(--ink);display:block;line-height:1.75;}
.closing-sub{font-size:.9rem;color:var(--mid);font-style:italic;display:block;margin-top:8px;line-height:1.75;}
.closing-seal{display:inline-block;margin-top:28px;font-family:'Cinzel',serif;font-size:.58rem;letter-spacing:.28em;color:var(--g5);border:1px solid var(--p3);border-radius:30px;padding:6px 24px;}

/* ══════════════════════════════════════
   TAB PANELS
══════════════════════════════════════ */
.tp{display:none;}.tp.active{display:block;}

/* ══════════════════════════════════════
   LANGUAGE SWITCHING
══════════════════════════════════════ */
/* Default: show kz, hide others */
.t-ru,.t-en{display:none;}
.t-kz{display:block;}
/* Inline versions */
span.t-ru,span.t-en{display:none;}
span.t-kz{display:inline;}

[data-lang="ru"] .t-kz{display:none;}
[data-lang="ru"] .t-ru{display:block;}
[data-lang="ru"] span.t-kz{display:none;}
[data-lang="ru"] span.t-ru{display:inline;}

[data-lang="en"] .t-kz{display:none;}
[data-lang="en"] .t-en{display:block;}
[data-lang="en"] span.t-kz{display:none;}
[data-lang="en"] span.t-en{display:inline;}

/* ══════════════════════════════════════
   SCROLL REVEAL
══════════════════════════════════════ */
.rv{opacity:0;transform:translateY(24px);transition:opacity .65s ease,transform .65s ease;}
.rv.vis{opacity:1;transform:none;}

/* ══════════════════════════════════════
   RESPONSIVE
══════════════════════════════════════ */
@media(max-width:720px){
  .frame{padding:38px 22px 48px;}
  .branch-spread{gap:18px;}
  .recit-inner{padding:40px 26px 36px;}
  .topbar-inner{flex-wrap:wrap;height:auto;padding:8px 16px;gap:6px;}
  .topbar{height:auto;}
  .page{padding-top:90px;}
}
@media print{
  #fire-screen,.topbar,.recit-backdrop{display:none!important;}
  body{background:white;}
  .frame{box-shadow:none;border:1.5px solid var(--g4);}
  .tp{display:block!important;}
}
</style>
</head>

<body data-lang="kz">

<!-- ══════════════════════════════════════
     ★ FIRE INTRO SCREEN ★
════════════════════════════════════════ -->
<div id="fire-screen">
  <canvas id="fire-canvas"></canvas>
  <div class="fire-title-wrap">
    <span class="fire-word" id="fire-word">ШЕЖІРЕ</span>
    <span class="fire-sub" id="fire-sub">ДУЛАТ ТАЙПАСЫ · 14 БУЫН</span>
    <span class="fire-tap" id="fire-tap" onclick="dismissFire()">
      ✦ &nbsp; ENTER &nbsp; ✦
    </span>
  </div>
</div>

<!-- ══════════════════════════════════════
     TOPBAR
════════════════════════════════════════ -->
<div class="topbar">
  <div class="topbar-inner">
    <div class="tb-group">
      <span class="tb-label">
        <span class="t-kz">ТІЛ</span>
        <span class="t-ru">ЯЗ</span>
        <span class="t-en">LANG</span>
      </span>
      <button class="tb-btn active" onclick="setLang('kz')">ҚАЗ</button>
      <button class="tb-btn" onclick="setLang('ru')">РУС</button>
      <button class="tb-btn" onclick="setLang('en')">ENG</button>
    </div>
    <div class="tb-group">
      <button class="tb-btn active" id="vbtn-v" onclick="setView('v')">
        <span class="t-kz">ТІГІНЕН</span>
        <span class="t-ru">ВЕРТИКАЛЬНО</span>
        <span class="t-en">VERTICAL</span>
      </button>
      <button class="tb-btn" id="vbtn-h" onclick="setView('h')">
        <span class="t-kz">КӨЛДЕНЕҢ</span>
        <span class="t-ru">ГОРИЗОНТАЛЬНО</span>
        <span class="t-en">HORIZONTAL</span>
      </button>
    </div>
  </div>
</div>

<!-- ══════════════════════════════════════
     RECITATION MODAL
════════════════════════════════════════ -->
<div class="recit-backdrop" id="recitBackdrop" onclick="closeRecit(event)">
  <div class="recit-panel" id="recitPanel">
    <svg class="recit-corner tl" viewBox="0 0 56 56" fill="none"><path d="M3 3 L24 3 L24 8 L8 8 L8 24 L3 24Z" stroke="#C9A84C" stroke-width="1" fill="none"/><circle cx="3" cy="3" r="2" fill="#C9A84C"/><path d="M16 3 Q22 6 24 12" stroke="#C9A84C" stroke-width=".7" fill="none"/><path d="M3 16 Q6 22 12 24" stroke="#C9A84C" stroke-width=".7" fill="none"/></svg>
    <svg class="recit-corner tr" viewBox="0 0 56 56" fill="none"><path d="M3 3 L24 3 L24 8 L8 8 L8 24 L3 24Z" stroke="#C9A84C" stroke-width="1" fill="none"/><circle cx="3" cy="3" r="2" fill="#C9A84C"/><path d="M16 3 Q22 6 24 12" stroke="#C9A84C" stroke-width=".7" fill="none"/></svg>
    <svg class="recit-corner bl" viewBox="0 0 56 56" fill="none"><path d="M3 3 L24 3 L24 8 L8 8 L8 24 L3 24Z" stroke="#C9A84C" stroke-width="1" fill="none"/><circle cx="3" cy="3" r="2" fill="#C9A84C"/></svg>
    <svg class="recit-corner br" viewBox="0 0 56 56" fill="none"><path d="M3 3 L24 3 L24 8 L8 8 L8 24 L3 24Z" stroke="#C9A84C" stroke-width="1" fill="none"/><circle cx="3" cy="3" r="2" fill="#C9A84C"/></svg>
    <button class="recit-close" id="recitCloseBtn">✕</button>
    <div class="recit-inner">
      <span class="recit-tag">
        <span class="t-kz">✦ АУЫЗША ШЕЖІРЕ ОҚЫЛЫМЫ ✦</span>
        <span class="t-ru">✦ УСТНАЯ РЕЦИТАЦИЯ ШЕЖИРЕ ✦</span>
        <span class="t-en">✦ ORAL LINEAGE RECITATION ✦</span>
      </span>
      <span class="recit-name" id="recitName">—</span>
      <span class="recit-name-lat" id="recitNameLat">—</span>
      <div class="recit-lang-bar">
        <button class="rltab active" onclick="setRecitLang('kz',this)">ҚАЗ</button>
        <button class="rltab" onclick="setRecitLang('ru',this)">РУС</button>
        <button class="rltab" onclick="setRecitLang('en',this)">ENG</button>
      </div>
      <div class="recit-scroll-area">
        <div class="recit-lang-content active" id="rl-kz"><span class="recit-text" id="recit-lines-kz"></span></div>
        <div class="recit-lang-content" id="rl-ru"><span class="recit-text" id="recit-lines-ru"></span></div>
        <div class="recit-lang-content" id="rl-en"><span class="recit-text" id="recit-lines-en"></span></div>
        <span class="recit-endpoint" id="recitEndpoint">
          <span class="t-kz">— осы ұрпаққа жетті —</span>
          <span class="t-ru">— до этого поколения —</span>
          <span class="t-en">— unto this generation —</span>
        </span>
      </div>
    </div>
  </div>
</div>

<!-- ══════════════════════════════════════
     MAIN PAGE
════════════════════════════════════════ -->
<div class="page">
<div class="frame">

  <!-- Corners -->
  <svg class="corner tl" viewBox="0 0 88 88" fill="none"><path d="M5 5 L38 5 L38 12 L12 12 L12 38 L5 38Z" stroke="#C9A84C" stroke-width="1.4" fill="none"/><circle cx="5" cy="5" r="3" fill="#C9A84C"/><path d="M22 5 Q32 10 38 20" stroke="#C9A84C" stroke-width=".9" fill="none"/><path d="M5 22 Q10 32 20 38" stroke="#C9A84C" stroke-width=".9" fill="none"/><path d="M26 26 Q34 18 42 26 Q34 34 26 26Z" fill="none" stroke="#C9A84C" stroke-width=".9" opacity=".6"/><line x1="44" y1="5" x2="84" y2="5" stroke="#C9A84C" stroke-width=".6" opacity=".3"/><line x1="5" y1="44" x2="5" y2="84" stroke="#C9A84C" stroke-width=".6" opacity=".3"/></svg>
  <svg class="corner tr" viewBox="0 0 88 88" fill="none"><path d="M5 5 L38 5 L38 12 L12 12 L12 38 L5 38Z" stroke="#C9A84C" stroke-width="1.4" fill="none"/><circle cx="5" cy="5" r="3" fill="#C9A84C"/><path d="M22 5 Q32 10 38 20" stroke="#C9A84C" stroke-width=".9" fill="none"/><path d="M5 22 Q10 32 20 38" stroke="#C9A84C" stroke-width=".9" fill="none"/><path d="M26 26 Q34 18 42 26 Q34 34 26 26Z" fill="none" stroke="#C9A84C" stroke-width=".9" opacity=".6"/><line x1="44" y1="5" x2="84" y2="5" stroke="#C9A84C" stroke-width=".6" opacity=".3"/><line x1="5" y1="44" x2="5" y2="84" stroke="#C9A84C" stroke-width=".6" opacity=".3"/></svg>
  <svg class="corner bl" viewBox="0 0 88 88" fill="none"><path d="M5 5 L38 5 L38 12 L12 12 L12 38 L5 38Z" stroke="#C9A84C" stroke-width="1.4" fill="none"/><circle cx="5" cy="5" r="3" fill="#C9A84C"/><path d="M26 26 Q34 18 42 26 Q34 34 26 26Z" fill="none" stroke="#C9A84C" stroke-width=".9" opacity=".6"/><line x1="44" y1="5" x2="84" y2="5" stroke="#C9A84C" stroke-width=".6" opacity=".3"/><line x1="5" y1="44" x2="5" y2="84" stroke="#C9A84C" stroke-width=".6" opacity=".3"/></svg>
  <svg class="corner br" viewBox="0 0 88 88" fill="none"><path d="M5 5 L38 5 L38 12 L12 12 L12 38 L5 38Z" stroke="#C9A84C" stroke-width="1.4" fill="none"/><circle cx="5" cy="5" r="3" fill="#C9A84C"/><path d="M26 26 Q34 18 42 26 Q34 34 26 26Z" fill="none" stroke="#C9A84C" stroke-width=".9" opacity=".6"/><line x1="44" y1="5" x2="84" y2="5" stroke="#C9A84C" stroke-width=".6" opacity=".3"/><line x1="5" y1="44" x2="5" y2="84" stroke="#C9A84C" stroke-width=".6" opacity=".3"/></svg>

  <!-- ══ HEADER ══ -->
  <div class="header rv">
    <span class="header-eyebrow">
      <span class="t-kz">✦ ата-баба жады · тек шежіресі ✦</span>
      <span class="t-ru">✦ память предков · родовое дерево ✦</span>
      <span class="t-en">✦ memory of ancestors · lineage tree ✦</span>
    </span>
    <div class="header-title">ШЕЖІРЕ</div>
    <span class="header-sub">
      <span class="t-kz">ДУЛАТ ТАЙПАСЫНЫҢ ТЕК ШЕЖІРЕСІ</span>
      <span class="t-ru">РОДОСЛОВНАЯ РОДА ДУЛАТ</span>
      <span class="t-en">THE FAMILY LINEAGE OF THE DULAT TRIBE</span>
    </span>
    <span class="header-lineage">
      <span class="t-kz">Дулат Тайпасы &nbsp;·&nbsp; 14 Буын &nbsp;·&nbsp; 14 Ұрпақ</span>
      <span class="t-ru">Род Дулат &nbsp;·&nbsp; 14 Поколений</span>
      <span class="t-en">Dulat Tribe &nbsp;·&nbsp; 14 Generations</span>
    </span>
    <div class="orn-band" style="margin-top:22px;"><span></span><em>✦ ✦ ✦</em><span></span></div>
  </div>

  <!-- ══ INTRO ══ -->
  <div class="intro rv">
    <span class="intro-main">
      <span class="t-kz">Шежіре — қазақ халқының рухани жады, ұлттық мұрасы.<br>Ол бізге арғы-бергі аталарымызды, олардың өнегесі мен ерліктерін ұмыттырмайды.<br>Шежіре — тамыры терең, бұтағы кең байтерек секілді өмір ағашы.</span>
      <span class="t-ru">Шежире — живая память казахского народа, его духовное наследие.<br>Оно хранит имена предков, их мудрость и подвиги сквозь века.<br>Шежире — это дерево жизни с глубокими корнями и широкими ветвями.</span>
      <span class="t-en">The Shezhire is the living memory of the Kazakh people — a sacred lineage record.<br>It keeps alive the names of ancestors, their wisdom and legacy across generations.<br>The Shezhire is the Tree of Life: deeply rooted, endlessly branching.</span>
    </span>
    <span class="intro-note">
      <span class="t-kz">Әр есімді басыңыз — шежіре ауызша оқылады, бабаларыңыздың дәстүрі бойынша.</span>
      <span class="t-ru">Нажмите на любое имя — и шежире прочитается так, как делали предки.</span>
      <span class="t-en">Tap any name to experience the lineage recited — as elders have done for centuries.</span>
    </span>
    <span class="intro-proverb">
      <span class="t-kz">«Жеті атасын білмеген — жетесіз»</span>
      <span class="t-ru">«Не знающий семи предков — безроден»</span>
      <span class="t-en">«One who does not know their seven ancestors has no roots»</span>
    </span>
  </div>

  <div class="hint-pulse rv">
    <span class="t-kz">↑ Кез келген атауды басыңыз</span>
    <span class="t-ru">↑ Нажмите на любое имя</span>
    <span class="t-en">↑ Tap any name to recite the lineage</span>
  </div>

  <!-- ══ VERTICAL TREE ══ -->
  <div class="tp active" id="tp-v">
    <div class="sec-label">
      <span class="t-kz">ТІГІНЕН ШЕЖІРЕ · ПОСТЕР НҰСҚАСЫ</span>
      <span class="t-ru">ВЕРТИКАЛЬНОЕ ДЕРЕВО · ФОРМАТ ПОСТЕРА</span>
      <span class="t-en">VERTICAL TREE · POSTER FORMAT</span>
    </div>
    <div class="tree-col">

      <!-- GEN 1 -->
      <div class="anc-row rv">
        <div class="gpill"><span class="t-kz">ГЕН 1 · Ата-Тек</span><span class="t-ru">ГЕН 1 · Прародитель</span><span class="t-en">GEN 1 · Root Ancestor</span></div>
        <div class="card root" onclick="openRecit(1)"><span class="kz">Дулат</span><span class="lat">Dulat</span></div>
      </div>
      <div class="cv rv" style="height:28px"></div>

      <!-- GEN 2 -->
      <div class="anc-row rv">
        <div class="gpill"><span class="t-kz">ГЕН 2</span><span class="t-ru">ГЕН 2</span><span class="t-en">GEN 2</span></div>
        <div class="card" onclick="openRecit(2)"><span class="kz">Жаныс</span><span class="lat">Zhanys</span></div>
      </div>
      <div class="cv rv" style="height:28px"></div>

      <!-- GEN 3 -->
      <div class="anc-row rv">
        <div class="gpill"><span class="t-kz">ГЕН 3</span><span class="t-ru">ГЕН 3</span><span class="t-en">GEN 3</span></div>
        <div class="card" onclick="openRecit(3)"><span class="kz">Жарылқамыс</span><span class="lat">Zharylkamys</span></div>
      </div>
      <div class="cv rv" style="height:28px"></div>

      <!-- GEN 4 -->
      <div class="anc-row rv">
        <div class="gpill"><span class="t-kz">ГЕН 4</span><span class="t-ru">ГЕН 4</span><span class="t-en">GEN 4</span></div>
        <div class="card" onclick="openRecit(4)"><span class="kz">Бұқар</span><span class="lat">Buqar</span></div>
      </div>
      <div class="cv rv" style="height:28px"></div>

      <!-- GEN 5 -->
      <div class="anc-row rv">
        <div class="gpill"><span class="t-kz">ГЕН 5</span><span class="t-ru">ГЕН 5</span><span class="t-en">GEN 5</span></div>
        <div class="card" onclick="openRecit(5)"><span class="kz">Жауғаш</span><span class="lat">Zhaugash</span></div>
      </div>
      <div class="cv rv" style="height:28px"></div>

      <!-- GEN 6 -->
      <div class="anc-row rv">
        <div class="gpill"><span class="t-kz">ГЕН 6</span><span class="t-ru">ГЕН 6</span><span class="t-en">GEN 6</span></div>
        <div class="card" onclick="openRecit(6)"><span class="kz">Сүйіндік</span><span class="lat">Suyindik</span></div>
      </div>
      <div class="cv rv" style="height:28px"></div>

      <!-- GEN 7 -->
      <div class="anc-row rv">
        <div class="gpill"><span class="t-kz">ГЕН 7</span><span class="t-ru">ГЕН 7</span><span class="t-en">GEN 7</span></div>
        <div class="card" onclick="openRecit(7)"><span class="kz">Құлсары</span><span class="lat">Qulsary</span></div>
      </div>
      <div class="cv rv" style="height:28px"></div>

      <!-- GEN 8 -->
      <div class="anc-row rv">
        <div class="gpill"><span class="t-kz">ГЕН 8</span><span class="t-ru">ГЕН 8</span><span class="t-en">GEN 8</span></div>
        <div class="card" onclick="openRecit(8)"><span class="kz">Қосқұлақ</span><span class="lat">Qosqulaq</span></div>
      </div>
      <div class="cv rv" style="height:28px"></div>

      <!-- GEN 9 -->
      <div class="anc-row rv">
        <div class="gpill"><span class="t-kz">ГЕН 9</span><span class="t-ru">ГЕН 9</span><span class="t-en">GEN 9</span></div>
        <div class="card" onclick="openRecit(9)"><span class="kz">Балтабай</span><span class="lat">Baltabay</span></div>
      </div>
      <div class="cv rv" style="height:28px"></div>

      <!-- GEN 10 -->
      <div class="anc-row rv">
        <div class="gpill"><span class="t-kz">ГЕН 10</span><span class="t-ru">ГЕН 10</span><span class="t-en">GEN 10</span></div>
        <div class="card" onclick="openRecit(10)"><span class="kz">Жантерек</span><span class="lat">Zhanterek</span></div>
      </div>
      <div class="cv rv" style="height:28px"></div>

      <!-- GEN 11 -->
      <div class="anc-row rv">
        <div class="gpill"><span class="t-kz">ГЕН 11</span><span class="t-ru">ГЕН 11</span><span class="t-en">GEN 11</span></div>
        <div class="card" onclick="openRecit(11)"><span class="kz">Тоғайбай</span><span class="lat">Toghaybay</span></div>
      </div>
      <div class="cv rv" style="height:28px"></div>

      <!-- GEN 12 -->
      <div class="anc-row rv">
        <div class="gpill"><span class="t-kz">ГЕН 12</span><span class="t-ru">ГЕН 12</span><span class="t-en">GEN 12</span></div>
        <div class="card" onclick="openRecit(12)"><span class="kz">Байгел</span><span class="lat">Baygel</span></div>
      </div>

      <!-- branch separator -->
      <div class="rv" style="margin:20px auto 0;text-align:center;">
        <div class="cv" style="height:22px"></div>
        <div style="display:inline-flex;align-items:center;gap:12px;font-family:'Cinzel',serif;font-size:.58rem;letter-spacing:.22em;color:var(--g5);border:1px solid var(--p3);border-radius:30px;background:var(--cream);padding:5px 20px;">
          ✦ &nbsp;
          <span class="t-kz">ТАРМАҚ · 13-ШІ БУЫН</span>
          <span class="t-ru">РАЗВЕТВЛЕНИЕ · ПОКОЛЕНИЕ 13</span>
          <span class="t-en">BRANCHING · GENERATION 13</span>
          &nbsp; ✦
        </div>
      </div>

      <!-- fork -->
      <div class="fork-bar rv" style="width:78%;margin:0 auto;">
        <div class="fork-arm-l"></div><div class="fork-tick"></div><div class="fork-arm-r"></div>
      </div>

      <!-- Gen 13-14 branches -->
      <div class="branch-spread rv" style="margin-top:0;align-items:flex-start;">

        <!-- ESBERGEN -->
        <div class="branch-col">
          <div class="cv" style="height:22px"></div>
          <div class="branch-tag">
            <span class="t-kz">Үлкен ұл</span>
            <span class="t-ru">Старший сын</span>
            <span class="t-en">Eldest son</span>
          </div>
          <div class="gpill"><span class="t-kz">ГЕН 13</span><span class="t-ru">ГЕН 13</span><span class="t-en">GEN 13</span></div>
          <div class="card father" onclick="openRecit(13,'esbergen')"><span class="kz">Есберген</span><span class="lat">Esbergen</span></div>
          <div class="sub-fork" style="width:72%;"><div class="sf-l"></div><div class="sf-t"></div><div class="sf-r"></div></div>
          <div class="children-row">
            <div style="display:flex;flex-direction:column;align-items:center;">
              <div class="cv" style="height:12px"></div>
              <div class="gpill" style="font-size:.5rem;"><span class="t-kz">ГЕН 14</span><span class="t-ru">ГЕН 14</span><span class="t-en">GEN 14</span></div>
              <div class="card leaf" onclick="openRecit(14,'azamat')"><span class="kz">Азамат</span><span class="lat">Azamat</span></div>
            </div>
            <div style="display:flex;flex-direction:column;align-items:center;">
              <div class="cv" style="height:12px"></div>
              <div class="gpill" style="font-size:.5rem;"><span class="t-kz">ГЕН 14</span><span class="t-ru">ГЕН 14</span><span class="t-en">GEN 14</span></div>
              <div class="card leaf" onclick="openRecit(14,'ahmet')"><span class="kz">Ахмет</span><span class="lat">Ahmet</span></div>
            </div>
          </div>
        </div>

        <!-- BEYSEN -->
        <div class="branch-col">
          <div class="cv" style="height:22px"></div>
          <div class="branch-tag">
            <span class="t-kz">Ортаншы ұл</span>
            <span class="t-ru">Средний сын</span>
            <span class="t-en">Middle son</span>
          </div>
          <div class="gpill"><span class="t-kz">ГЕН 13</span><span class="t-ru">ГЕН 13</span><span class="t-en">GEN 13</span></div>
          <div class="card father" onclick="openRecit(13,'beysen')"><span class="kz">Бейсен</span><span class="lat">Beysen</span></div>
          <div class="sub-fork" style="width:72%;"><div class="sf-l"></div><div class="sf-t"></div><div class="sf-r"></div></div>
          <div class="children-row">
            <div style="display:flex;flex-direction:column;align-items:center;">
              <div class="cv" style="height:12px"></div>
              <div class="gpill" style="font-size:.5rem;"><span class="t-kz">ГЕН 14</span><span class="t-ru">ГЕН 14</span><span class="t-en">GEN 14</span></div>
              <div class="card leaf" onclick="openRecit(14,'tylek')"><span class="kz">Тылек</span><span class="lat">Tylek</span></div>
            </div>
            <div style="display:flex;flex-direction:column;align-items:center;">
              <div class="cv" style="height:12px"></div>
              <div class="gpill" style="font-size:.5rem;"><span class="t-kz">ГЕН 14</span><span class="t-ru">ГЕН 14</span><span class="t-en">GEN 14</span></div>
              <div class="card leaf" onclick="openRecit(14,'yerkyn')"><span class="kz">Еркын</span><span class="lat">Yerkyn</span></div>
            </div>
          </div>
        </div>

        <!-- YDYRYS -->
        <div class="branch-col">
          <div class="cv" style="height:22px"></div>
          <div class="branch-tag">
            <span class="t-kz">Кенже ұл</span>
            <span class="t-ru">Младший сын</span>
            <span class="t-en">Youngest son</span>
          </div>
          <div class="gpill"><span class="t-kz">ГЕН 13</span><span class="t-ru">ГЕН 13</span><span class="t-en">GEN 13</span></div>
          <div class="card father" onclick="openRecit(13,'ydyrys')"><span class="kz">Ыдырыс</span><span class="lat">Ydyrys</span></div>
          <div class="sub-fork" style="width:88%;"><div class="sf-l"></div><div class="sf-t"></div><div class="sf-r"></div></div>
          <div class="children-row">
            <div style="display:flex;flex-direction:column;align-items:center;">
              <div class="cv" style="height:12px"></div>
              <div class="gpill" style="font-size:.5rem;"><span class="t-kz">ГЕН 14</span><span class="t-ru">ГЕН 14</span><span class="t-en">GEN 14</span></div>
              <div class="card leaf" onclick="openRecit(14,'rakhym')"><span class="kz">Рахым</span><span class="lat">Rakhym</span></div>
            </div>
            <div style="display:flex;flex-direction:column;align-items:center;">
              <div class="cv" style="height:12px"></div>
              <div class="gpill" style="font-size:.5rem;"><span class="t-kz">ГЕН 14</span><span class="t-ru">ГЕН 14</span><span class="t-en">GEN 14</span></div>
              <div class="card leaf" onclick="openRecit(14,'rashit')"><span class="kz">Рашит</span><span class="lat">Rashit</span></div>
            </div>
            <div style="display:flex;flex-direction:column;align-items:center;">
              <div class="cv" style="height:12px"></div>
              <div class="gpill" style="font-size:.5rem;"><span class="t-kz">ГЕН 14</span><span class="t-ru">ГЕН 14</span><span class="t-en">GEN 14</span></div>
              <div class="card leaf" onclick="openRecit(14,'qaysar')"><span class="kz">Кайсар</span><span class="lat">Qaysar</span></div>
            </div>
          </div>
        </div>

      </div><!-- /branch-spread -->
    </div><!-- /tree-col -->
  </div><!-- /tp-v -->

  <!-- ══ HORIZONTAL TREE ══ -->
  <div class="tp" id="tp-h">
    <div class="sec-label">
      <span class="t-kz">КӨЛДЕНЕҢ ШЕЖІРЕ · ЦИФРЛЫҚ НҰСҚА</span>
      <span class="t-ru">ГОРИЗОНТАЛЬНОЕ ДЕРЕВО · ЦИФРОВОЙ ФОРМАТ</span>
      <span class="t-en">HORIZONTAL TREE · DIGITAL FORMAT</span>
    </div>
    <div class="htree rv">
<pre>
<span class="hr">══════════════════════════════════════════════════════════════════</span>
<span class="hg">  ШЕЖІРЕ · SHEZHIRE · ДУЛАТ ТАЙПАСЫ · 14 БУЫН</span>
<span class="hr">══════════════════════════════════════════════════════════════════</span>

<span class="hg">[ГЕН  1]</span>  <span class="hn">Дулат</span> <span class="hl">(Dulat)</span>  ◈  <span class="hnt">Ата-Тек · Root Ancestor · Прародитель</span>
          │
<span class="hg">[ГЕН  2]</span>  └─── <span class="hn">Жаныс</span> <span class="hl">(Zhanys)</span>
                │
<span class="hg">[ГЕН  3]</span>       └─── <span class="hn">Жарылқамыс</span> <span class="hl">(Zharylkamys)</span>
                      │
<span class="hg">[ГЕН  4]</span>            └─── <span class="hn">Бұқар</span> <span class="hl">(Buqar)</span>
                           │
<span class="hg">[ГЕН  5]</span>                └─── <span class="hn">Жауғаш</span> <span class="hl">(Zhaugash)</span>
                                 │
<span class="hg">[ГЕН  6]</span>                     └─── <span class="hn">Сүйіндік</span> <span class="hl">(Suyindik)</span>
                                       │
<span class="hg">[ГЕН  7]</span>                          └─── <span class="hn">Құлсары</span> <span class="hl">(Qulsary)</span>
                                             │
<span class="hg">[ГЕН  8]</span>                               └─── <span class="hn">Қосқұлақ</span> <span class="hl">(Qosqulaq)</span>
                                                   │
<span class="hg">[ГЕН  9]</span>                                    └─── <span class="hn">Балтабай</span> <span class="hl">(Baltabay)</span>
                                                         │
<span class="hg">[ГЕН 10]</span>                                         └─── <span class="hn">Жантерек</span> <span class="hl">(Zhanterek)</span>
                                                               │
<span class="hg">[ГЕН 11]</span>                                               └─── <span class="hn">Тоғайбай</span> <span class="hl">(Toghaybay)</span>
                                                                     │
<span class="hg">[ГЕН 12]</span>                                                    └─── <span class="hn">Байгел</span> <span class="hl">(Baygel)</span>
                                                                           │
<span class="hr">              ┌──────────────────────────┴──────────────────────────┐</span>
              │                           │                           │
<span class="hg">[ГЕН 13]</span>  <span class="hn">Есберген</span> <span class="hl">(Esbergen)</span>      <span class="hn">Бейсен</span> <span class="hl">(Beysen)</span>        <span class="hn">Ыдырыс</span> <span class="hl">(Ydyrys)</span>
          <span class="hnt">Үлкен · Eldest · Старший</span>     <span class="hnt">Ортаншы · Middle · Средний</span>    <span class="hnt">Кенже · Youngest · Младший</span>
              │                           │                           │
           <span class="hr">┌──┴──┐</span>                  <span class="hr">┌──┴──┐</span>                <span class="hr">┌──┬──┴──┐</span>
           │     │                  │     │                │  │     │
<span class="hg">[ГЕН 14]</span>  <span class="hn">Азамат</span> <span class="hn">Ахмет</span>          <span class="hn">Тылек</span>  <span class="hn">Еркын</span>         <span class="hn">Рахым</span> <span class="hn">Рашит</span> <span class="hn">Кайсар</span>
          <span class="hl">(Azamat)(Ahmet)</span>       <span class="hl">(Tylek)(Yerkyn)</span>    <span class="hl">(Rakhym)(Rashit)(Qaysar)</span>

<span class="hr">══════════════════════════════════════════════════════════════════</span>
</pre>
    </div>
  </div>

  <!-- ══ CLOSING ══ -->
  <div class="closing rv">
    <div class="orn-band"><span></span><em>✦ ✦ ✦</em><span></span></div>
    <br>
    <span class="closing-main">
      <span class="t-kz">Дулаттан тараған ұрпақ — бір тамырдан өскен мың бұтақ.</span>
      <span class="t-ru">Потомки Дулата — тысяча ветвей от единого корня.</span>
      <span class="t-en">The descendants of Dulat — a thousand branches from one root.</span>
    </span>
    <span class="closing-sub">
      <span class="t-kz">Бұл шежіре — өткеннің ізі, бүгіннің мақтанышы, келешектің жолы.</span>
      <span class="t-ru">Это шежире — след прошлого, гордость настоящего, путь будущего.</span>
      <span class="t-en">This Shezhire is the footprint of the past, the pride of today, and the path of tomorrow.</span>
    </span>
    <div class="closing-seal">
      <span class="t-kz">✦ &nbsp; ШЕЖІРЕ · 14 БУЫН · ДУЛАТ ТАЙПАСЫ &nbsp; ✦</span>
      <span class="t-ru">✦ &nbsp; ШЕЖИРЕ · 14 ПОКОЛЕНИЙ · РОД ДУЛАТ &nbsp; ✦</span>
      <span class="t-en">✦ &nbsp; SHEZHIRE · 14 GENERATIONS · DULAT TRIBE &nbsp; ✦</span>
    </div>
  </div>

</div><!-- /frame -->
</div><!-- /page -->

<script>
/* ══════════════════════════════════════
   ★ FIRE CANVAS ENGINE ★
   Cellular automaton fire simulation
══════════════════════════════════════ */
(function() {
  const canvas = document.getElementById('fire-canvas');
  const ctx = canvas.getContext('2d');
  let W, H, cols, rows, buf, buf2, imgData, pixels;
  const CELL = 4; // pixel size of each fire cell

  // Fire color palette: black → deep red → orange → yellow → white
  const palette = [];
  for (let i = 0; i < 256; i++) {
    let r, g, b, a;
    if (i < 64) {
      // black to deep red
      r = Math.round(i * 2.5);
      g = 0;
      b = 0;
      a = Math.round(i * 3.5);
    } else if (i < 128) {
      // deep red to orange
      const t = (i - 64) / 64;
      r = Math.round(160 + t * 95);
      g = Math.round(t * 80);
      b = 0;
      a = Math.min(255, Math.round(224 + t * 31));
    } else if (i < 192) {
      // orange to yellow
      const t = (i - 128) / 64;
      r = 255;
      g = Math.round(80 + t * 155);
      b = Math.round(t * 40);
      a = 255;
    } else {
      // yellow to bright white-gold
      const t = (i - 192) / 63;
      r = 255;
      g = Math.round(235 + t * 20);
      b = Math.round(40 + t * 215);
      a = 255;
    }
    palette.push([r, g, b, a]);
  }

  function resize() {
    W = canvas.width  = window.innerWidth;
    H = canvas.height = window.innerHeight;
    cols = Math.ceil(W / CELL) + 2;
    rows = Math.ceil(H / CELL) + 2;
    buf  = new Uint8Array(cols * rows);
    buf2 = new Uint8Array(cols * rows);
    imgData = ctx.createImageData(W, H);
    pixels  = imgData.data;
  }

  function seedBottom() {
    // Random hot cells along the bottom row
    const base = (rows - 1) * cols;
    for (let x = 0; x < cols; x++) {
      buf[base + x] = Math.random() > 0.15 ? 200 + Math.random() * 55 | 0 : 80 + Math.random() * 80 | 0;
    }
  }

  function stepFire() {
    seedBottom();
    // Propagate upward
    for (let y = 0; y < rows - 1; y++) {
      for (let x = 1; x < cols - 1; x++) {
        const below = buf[(y + 1) * cols + x];
        const bl    = buf[(y + 1) * cols + x - 1];
        const br    = buf[(y + 1) * cols + x + 1];
        const bb    = y + 2 < rows ? buf[(y + 2) * cols + x] : below;
        const avg   = ((below + bl + br + bb) >> 2) - (Math.random() * 6 | 0);
        buf2[y * cols + x] = avg < 0 ? 0 : avg;
      }
    }
    // Swap
    const tmp = buf; buf = buf2; buf2 = tmp;
  }

  function renderFire() {
    for (let y = 0; y < rows; y++) {
      for (let x = 0; x < cols; x++) {
        const v = buf[y * cols + x];
        const [r, g, b, a] = palette[v];
        // Paint CELL×CELL pixels
        for (let py = 0; py < CELL; py++) {
          const row = y * CELL + py;
          if (row >= H) continue;
          for (let px = 0; px < CELL; px++) {
            const col = x * CELL + px;
            if (col >= W) continue;
            const i = (row * W + col) * 4;
            pixels[i]   = r;
            pixels[i+1] = g;
            pixels[i+2] = b;
            pixels[i+3] = a;
          }
        }
      }
    }
    ctx.putImageData(imgData, 0, 0);
  }

  let raf;
  function loop() {
    stepFire();
    renderFire();
    raf = requestAnimationFrame(loop);
  }

  resize();
  window.addEventListener('resize', resize);
  loop();

  // Expose stop so we can cancel on exit
  window._stopFire = () => cancelAnimationFrame(raf);
})();

/* ══════════════════════════════════════
   DISMISS FIRE SCREEN
══════════════════════════════════════ */
function dismissFire() {
  const screen = document.getElementById('fire-screen');
  screen.classList.add('exit');
  setTimeout(() => {
    screen.style.display = 'none';
    if (window._stopFire) window._stopFire();
  }, 950);
}

// Auto-dismiss after 5s if user doesn't click
setTimeout(() => {
  const screen = document.getElementById('fire-screen');
  if (screen && !screen.classList.contains('exit')) dismissFire();
}, 5000);

// Also dismiss on any key
document.addEventListener('keydown', () => {
  const screen = document.getElementById('fire-screen');
  if (screen && !screen.classList.contains('exit')) dismissFire();
}, { once: true });

/* ══════════════════════════════════════
   LINEAGE DATA
══════════════════════════════════════ */
const ANCESTORS = [
  {gen:1,  kz:'Дулат',      lat:'Dulat'},
  {gen:2,  kz:'Жаныс',      lat:'Zhanys'},
  {gen:3,  kz:'Жарылқамыс', lat:'Zharylkamys'},
  {gen:4,  kz:'Бұқар',      lat:'Buqar'},
  {gen:5,  kz:'Жауғаш',     lat:'Zhaugash'},
  {gen:6,  kz:'Сүйіндік',   lat:'Suyindik'},
  {gen:7,  kz:'Құлсары',    lat:'Qulsary'},
  {gen:8,  kz:'Қосқұлақ',   lat:'Qosqulaq'},
  {gen:9,  kz:'Балтабай',   lat:'Baltabay'},
  {gen:10, kz:'Жантерек',   lat:'Zhanterek'},
  {gen:11, kz:'Тоғайбай',   lat:'Toghaybay'},
  {gen:12, kz:'Байгел',     lat:'Baygel'},
];
const GEN13 = {
  esbergen:{kz:'Есберген',lat:'Esbergen'},
  beysen:  {kz:'Бейсен',  lat:'Beysen'},
  ydyrys:  {kz:'Ыдырыс',  lat:'Ydyrys'},
};
const GEN14 = {
  azamat: {kz:'Азамат',lat:'Azamat', father:'esbergen'},
  ahmet:  {kz:'Ахмет',  lat:'Ahmet',  father:'esbergen'},
  tylek:  {kz:'Тылек',  lat:'Tylek',  father:'beysen'},
  yerkyn: {kz:'Еркын',  lat:'Yerkyn', father:'beysen'},
  rakhym: {kz:'Рахым',  lat:'Rakhym', father:'ydyrys'},
  rashit: {kz:'Рашит',  lat:'Rashit', father:'ydyrys'},
  qaysar: {kz:'Кайсар', lat:'Qaysar', father:'ydyrys'},
};

/* ══════════════════════════════════════
   RECITATION
══════════════════════════════════════ */
// Gen label per language
function genLabel(n, lang) {
  if (lang === 'en') return `GEN ${n}`;
  return `ГЕН ${n}`;
}

function renderLines(containerId, chain, lang, subject) {
  const el = document.getElementById(containerId);
  el.innerHTML = '';

  const addLine = (gen, kz, lat) => {
    const s = document.createElement('span');
    s.className = 'recit-line';
    s.innerHTML = `<em class="gen-num">${genLabel(gen, lang)}</em><span class="anc-name">${kz}</span> <span class="anc-lat">${lat}</span>`;
    el.appendChild(s);
  };
  const addArrow = () => {
    const a = document.createElement('span');
    a.className = 'recit-arrow';
    a.innerHTML = '↓';
    el.appendChild(a);
  };

  chain.forEach((a, i) => {
    addLine(a.gen, a.kz, a.lat);
    if (i < chain.length - 1 || subject) addArrow();
  });

  if (subject) {
    addLine(subject.gen, subject.kz, subject.lat);
    if (subject.child) {
      addArrow();
      addLine(subject.child.gen, subject.child.kz, subject.child.lat);
    }
  }

  // Staggered animation
  el.querySelectorAll('.recit-line, .recit-arrow').forEach((node, i) => {
    setTimeout(() => node.classList.add('show'), 100 + i * 150);
  });
  const total = el.querySelectorAll('.recit-line, .recit-arrow').length;
  setTimeout(() => {
    document.getElementById('recitEndpoint').classList.add('show');
  }, 100 + total * 150 + 300);
}

function openRecit(gen, key) {
  // Reset
  document.getElementById('recitEndpoint').classList.remove('show');
  ['kz','ru','en'].forEach(l => document.getElementById(`recit-lines-${l}`).innerHTML = '');

  let displayKz, displayLat, chain, subject = null;

  if (gen <= 12) {
    const a = ANCESTORS[gen - 1];
    displayKz = a.kz; displayLat = a.lat;
    chain = ANCESTORS.slice(0, gen);
  } else if (gen === 13) {
    const p = GEN13[key];
    displayKz = p.kz; displayLat = p.lat;
    chain = ANCESTORS.slice(0, 12);
    subject = {gen: 13, kz: p.kz, lat: p.lat};
  } else {
    const p = GEN14[key];
    const f = GEN13[p.father];
    displayKz = p.kz; displayLat = p.lat;
    chain = ANCESTORS.slice(0, 12);
    subject = {gen: 13, kz: f.kz, lat: f.lat, child: {gen: 14, kz: p.kz, lat: p.lat}};
  }

  document.getElementById('recitName').textContent = displayKz;
  document.getElementById('recitNameLat').textContent = displayLat;

  ['kz','ru','en'].forEach(lang => renderLines(`recit-lines-${lang}`, chain, lang, subject));

  // Show backdrop
  const bd = document.getElementById('recitBackdrop');
  bd.classList.add('open');
  document.body.style.overflow = 'hidden';

  // Dim / highlight cards
  document.querySelectorAll('.card').forEach(c => c.classList.add('dimmed'));
  document.querySelectorAll('.card').forEach(c => {
    if (c.querySelector('.kz')?.textContent === displayKz) {
      c.classList.remove('dimmed');
      c.classList.add('reciting');
    }
  });
}

function closeRecit(e) {
  if (e && e.target.id !== 'recitBackdrop' && e.target.id !== 'recitCloseBtn') return;
  document.getElementById('recitBackdrop').classList.remove('open');
  document.body.style.overflow = '';
  document.querySelectorAll('.card').forEach(c => c.classList.remove('dimmed','reciting'));
  document.getElementById('recitEndpoint').classList.remove('show');
}

document.getElementById('recitCloseBtn').addEventListener('click', () => {
  document.getElementById('recitBackdrop').classList.remove('open');
  document.body.style.overflow = '';
  document.querySelectorAll('.card').forEach(c => c.classList.remove('dimmed','reciting'));
  document.getElementById('recitEndpoint').classList.remove('show');
});
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeRecit({target:{id:'recitBackdrop'}}); });

function setRecitLang(lang, btn) {
  document.querySelectorAll('.rltab').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  document.querySelectorAll('.recit-lang-content').forEach(c => c.classList.remove('active'));
  document.getElementById(`rl-${lang}`).classList.add('active');
}

/* ══════════════════════════════════════
   GLOBAL LANGUAGE TOGGLE
══════════════════════════════════════ */
function setLang(lang) {
  document.body.setAttribute('data-lang', lang);
  document.querySelectorAll('.tb-btn').forEach(b => {
    const fn = b.getAttribute('onclick') || '';
    if (fn === `setLang('${lang}')`) b.classList.add('active');
    else if (fn.startsWith('setLang')) b.classList.remove('active');
  });
  document.documentElement.lang = {kz:'kk', ru:'ru', en:'en'}[lang];
}

/* ══════════════════════════════════════
   VIEW TOGGLE
══════════════════════════════════════ */
function setView(id) {
  document.querySelectorAll('.tp').forEach(p => p.classList.remove('active'));
  document.getElementById(`tp-${id}`).classList.add('active');
  document.querySelectorAll('[id^="vbtn-"]').forEach(b => b.classList.remove('active'));
  document.getElementById(`vbtn-${id}`).classList.add('active');
}

/* ══════════════════════════════════════
   SCROLL REVEAL
══════════════════════════════════════ */
const ro = new IntersectionObserver(entries => {
  entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('vis'); ro.unobserve(e.target); } });
}, { threshold: 0.08, rootMargin: '0px 0px -20px 0px' });

document.querySelectorAll('.rv').forEach((el, i) => {
  el.style.transitionDelay = `${i * 30}ms`;
  ro.observe(el);
});
</script>
</body>
</html>
