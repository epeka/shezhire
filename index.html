<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ–Ω—ñ“£ –®–µ–∂—ñ—Ä–µ–º - My Kazakh Shezhire</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        header h1 {
            font-size: 3.5em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
            font-weight: 800;
            letter-spacing: -1px;
        }

        header p {
            font-size: 1.3em;
            opacity: 0.95;
            font-weight: 500;
        }

        .subtitle {
            margin-top: 15px;
            font-size: 1em;
            opacity: 0.9;
            line-height: 1.6;
        }

        .stats-bar {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: 700;
            display: block;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .view-toggle {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .view-btn {
            padding: 15px 30px;
            background: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 700;
            font-size: 1em;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .view-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .view-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .tree-view, .list-view, .family-view {
            display: none;
        }

        .tree-view.active, .list-view.active, .family-view.active {
            display: block;
        }

        /* Family Tree View - Modern Hierarchical */
        .family-tree {
            background: white;
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        }

        .generation-group {
            margin-bottom: 50px;
        }

        .gen-header {
            font-size: 1.5em;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .gen-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2em;
        }

        .family-branch {
            display: flex;
            align-items: flex-start;
            gap: 30px;
            margin-bottom: 30px;
            position: relative;
        }

        .parent-card {
            flex-shrink: 0;
            width: 280px;
        }

        .person-card {
            padding: 25px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .person-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--card-color-1), var(--card-color-2));
        }

        .person-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            border-color: var(--card-color-1);
        }

        .person-card.selected {
            box-shadow: 0 0 0 4px var(--card-color-1);
            border-color: var(--card-color-1);
        }

        .gen-badge {
            display: inline-block;
            padding: 6px 14px;
            background: linear-gradient(135deg, var(--card-color-1), var(--card-color-2));
            color: white;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 700;
            margin-bottom: 12px;
            letter-spacing: 0.5px;
        }

        .person-name {
            font-size: 1.6em;
            font-weight: 800;
            color: #2d3748;
            margin-bottom: 5px;
            line-height: 1.2;
        }

        .person-name-en {
            font-size: 0.65em;
            color: #718096;
            font-weight: 500;
            display: block;
            margin-top: 5px;
        }

        .person-desc {
            color: #718096;
            margin-bottom: 12px;
            font-size: 0.95em;
        }

        .special-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.8em;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }

        .children-container {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
            border-radius: 20px;
            border: 2px dashed rgba(102, 126, 234, 0.2);
        }

        .child-card {
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid var(--card-color-1);
        }

        .child-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }

        .child-name {
            font-size: 1.3em;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .child-gen {
            font-size: 0.85em;
            color: #718096;
            font-weight: 500;
        }

        .connector-line {
            position: absolute;
            left: 280px;
            top: 50%;
            width: 30px;
            height: 2px;
            background: linear-gradient(90deg, var(--card-color-1), transparent);
        }

        /* List View - Enhanced */
        .list-container {
            display: grid;
            gap: 20px;
        }

        .list-item {
            display: flex;
            align-items: center;
            gap: 25px;
            padding: 25px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 6px solid var(--card-color-1);
        }

        .list-item:hover {
            transform: translateX(10px);
            box-shadow: 0 10px 35px rgba(0, 0, 0, 0.15);
        }

        .list-number {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--card-color-1), var(--card-color-2));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            font-weight: 700;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .list-content {
            flex: 1;
        }

        .list-name {
            font-size: 1.6em;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .list-desc {
            color: #718096;
            font-size: 1em;
        }

        /* Info Panel - Premium Design */
        .info-panel {
            position: fixed;
            right: -450px;
            top: 0;
            width: 450px;
            max-width: 100%;
            height: 100vh;
            background: white;
            box-shadow: -10px 0 40px rgba(0, 0, 0, 0.3);
            padding: 40px;
            overflow-y: auto;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
        }

        .info-panel.active {
            right: 0;
        }

        .close-btn {
            position: absolute;
            top: 25px;
            right: 25px;
            background: #f7fafc;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.4em;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            color: #4a5568;
            font-weight: 300;
        }

        .close-btn:hover {
            background: #e2e8f0;
            transform: rotate(90deg);
        }

        .info-header {
            margin-bottom: 30px;
        }

        .info-title {
            font-size: 2.2em;
            font-weight: 800;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .info-badge {
            padding: 12px 20px;
            background: linear-gradient(135deg, var(--info-color-1), var(--info-color-2));
            color: white;
            border-radius: 15px;
            font-weight: 700;
            display: inline-block;
        }

        .info-section {
            margin-bottom: 25px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 15px;
            border-left: 4px solid var(--info-color-1);
        }

        .info-label {
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 5px;
            font-size: 0.95em;
        }

        .info-value {
            color: #4a5568;
            line-height: 1.6;
        }

        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 700;
            font-size: 1em;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .legend {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .legend-title {
            font-size: 1.2em;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .legend-items {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-icon {
            font-size: 1.5em;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }

            .family-branch {
                flex-direction: column;
            }

            .parent-card {
                width: 100%;
            }

            .children-container {
                grid-template-columns: 1fr;
            }

            .info-panel {
                width: 100%;
                right: -100%;
            }

            .stat-item {
                padding: 10px 20px;
            }

            .stat-number {
                font-size: 1.5em;
            }
        }

        @media print {
            body {
                background: white;
            }

            .view-toggle, .actions, .close-btn {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üå≥ –ú–µ–Ω—ñ“£ –®–µ–∂—ñ—Ä–µ–º</h1>
            <p>My Kazakh Family Tree ‚Ä¢ –ñ–µ—Ç—ñ –ê—Ç–∞ (Seven Ancestors)</p>
            <p class="subtitle">–î—É–ª–∞—Ç —Ä—É—ã ‚Ä¢ “∞–ª—ã –∂“Ø–∑ ‚Ä¢ –ñ–∞–º–±—ã–ª –æ–±–ª—ã—Å—ã, “ö–æ—Ä–¥–∞–π<br>Dulat Tribe ‚Ä¢ Uly Zhuz ‚Ä¢ Zhambyl region, Kordai</p>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-number" id="totalCount">22</span>
                    <span class="stat-label">–ê–¥–∞–º–¥–∞—Ä ‚Ä¢ People</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">13</span>
                    <span class="stat-label">“∞—Ä–ø–∞“õ—Ç–∞—Ä ‚Ä¢ Generations</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">3</span>
                    <span class="stat-label">Branches</span>
                </div>
            </div>
        </header>

        <div class="legend">
            <div class="legend-title">üîç –ë–µ–ª–≥—ñ–ª–µ—Ä ‚Ä¢ Legend</div>
            <div class="legend-items">
                <div class="legend-item">
                    <span class="legend-icon">üèõÔ∏è</span>
                    <span>–†“± –±–∞—Å—Ç–∞—É—ã ‚Ä¢ Tribal Origin</span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon">üë¥</span>
                    <span>–ê—Ç–∞“£ ‚Ä¢ Grandfather</span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon">üë®</span>
                    <span>“ö–∞–∑—ñ—Ä–≥—ñ “±—Ä–ø–∞“õ ‚Ä¢ Current Generation</span>
                </div>
            </div>
        </div>

        <div class="view-toggle">
            <button class="view-btn active" onclick="switchView('family')">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –û—Ç–±–∞—Å—ã–ª—ã“õ ‚Ä¢ Family Tree</button>
            <button class="view-btn" onclick="switchView('list')">üìã –¢—ñ–∑—ñ–º ‚Ä¢ List View</button>
        </div>

        <!-- Family Tree View -->
        <div class="family-view active">
            <div class="family-tree" id="familyTree"></div>
        </div>

        <!-- List View -->
        <div class="list-view">
            <div class="list-container" id="listContainer"></div>
        </div>

        <div class="actions">
            <button class="action-btn" onclick="downloadShezhire()">
                <span>üì•</span> –ñ“Ø–∫—Ç–µ—É ‚Ä¢ Download
            </button>
            <button class="action-btn" onclick="shareShezhire()">
                <span>üîó</span> –ë”©–ª—ñ—Å—É ‚Ä¢ Share
            </button>
            <button class="action-btn" onclick="printShezhire()">
                <span>üñ®Ô∏è</span> –ë–∞—Å—ã–ø —à—ã“ì–∞—Ä—É ‚Ä¢ Print
            </button>
        </div>
    </div>

    <div class="info-panel" id="infoPanel">
        <button class="close-btn" onclick="closeInfo()">√ó</button>
        <div id="infoPanelContent"></div>
    </div>

    <script>
        const shezhireData = {
            ancestors: [
                { id: 1, gen: 1, name: "–î—É–ª–∞—Ç", nameEn: "Dulat", desc: "–†“± (Tribe) - “∞–ª—ã –∂“Ø–∑", descKz: "–†“± - “∞–ª—ã –∂“Ø–∑–¥—ñ“£ –µ“£ —ñ—Ä—ñ —Ç–∞–π–ø–∞–ª–∞—Ä—ã–Ω—ã“£ –±—ñ—Ä—ñ", color1: "#667eea", color2: "#764ba2", special: "üèõÔ∏è", relation: "Tribal Origin", relationKz: "–¢–∞–π–ø–∞–ª—ã“õ –±–∞—Å—Ç–∞—É" },
                { id: 2, gen: 2, name: "–ñ–∞–Ω—ã—Å", nameEn: "Zhanys", desc: "2nd Generation", descKz: "2-—à—ñ “±—Ä–ø–∞“õ –∞—Ç–∞-–±–∞–±–∞–º", color1: "#4facfe", color2: "#00f2fe", relation: "Ancient Ancestor", relationKz: "–ï—Ä—Ç–µ –∑–∞–º–∞–Ω“ì—ã –∞—Ç–∞" },
                { id: 3, gen: 3, name: "–ñ–∞—Ä—ã–ª“õ–∞–º—ã—Å", nameEn: "Zharylkamys", desc: "3rd Generation", descKz: "3-—à—ñ “±—Ä–ø–∞“õ –∞—Ç–∞-–±–∞–±–∞–º", color1: "#43e97b", color2: "#38f9d7", relation: "Ancient Ancestor", relationKz: "–ï—Ä—Ç–µ –∑–∞–º–∞–Ω“ì—ã –∞—Ç–∞" },
                { id: 4, gen: 4, name: "–ë“±“õ–∞—Ä", nameEn: "Buqar", desc: "4th Generation", descKz: "4-—à—ñ “±—Ä–ø–∞“õ –∞—Ç–∞-–±–∞–±–∞–º", color1: "#fa709a", color2: "#fee140", relation: "Ancient Ancestor", relationKz: "–ï—Ä—Ç–µ –∑–∞–º–∞–Ω“ì—ã –∞—Ç–∞" },
                { id: 5, gen: 5, name: "–ñ–∞—É“ì–∞—à", nameEn: "Zhaugash", desc: "5th Generation", descKz: "5-—à—ñ “±—Ä–ø–∞“õ –∞—Ç–∞-–±–∞–±–∞–º", color1: "#30cfd0", color2: "#330867", relation: "Ancient Ancestor", relationKz: "–ï—Ä—Ç–µ –∑–∞–º–∞–Ω“ì—ã –∞—Ç–∞" },
                { id: 6, gen: 6, name: "–°“Ø–π—ñ–Ω–¥—ñ–∫", nameEn: "Suyindik", desc: "6th Generation", descKz: "6-—à—ã “±—Ä–ø–∞“õ –∞—Ç–∞-–±–∞–±–∞–º", color1: "#a8edea", color2: "#fed6e3", relation: "Ancient Ancestor", relationKz: "–ï—Ä—Ç–µ –∑–∞–º–∞–Ω“ì—ã –∞—Ç–∞" },
                { id: 7, gen: 7, name: "“ö“±–ª—Å–∞—Ä—ã", nameEn: "Qulsary", desc: "7th Generation (–ñ–µ—Ç—ñ –∞—Ç–∞)", descKz: "7-—à—ñ “±—Ä–ø–∞“õ –∞—Ç–∞-–±–∞–±–∞–º (–ñ–µ—Ç—ñ –∞—Ç–∞)", color1: "#ff9a9e", color2: "#fecfef", relation: "Seventh Ancestor", relationKz: "–ñ–µ—Ç—ñ–Ω—à—ñ –∞—Ç–∞" },
                { id: 8, gen: 8, name: "“ö–æ—Å“õ“±–ª–∞“õ", nameEn: "Qosqulaq", desc: "8th Generation", descKz: "8-—à—ñ “±—Ä–ø–∞“õ", color1: "#ffecd2", color2: "#fcb69f", relation: "Great Ancestor", relationKz: "–ë–∞–±–∞ –∞—Ç–∞—Å—ã" },
                { id: 9, gen: 9, name: "–ë–∞–ª—Ç–∞–±–∞–π", nameEn: "Baltabay", desc: "9th Generation", descKz: "9-—à—ã “±—Ä–ø–∞“õ", color1: "#ff6e7f", color2: "#bfe9ff", relation: "Great Ancestor", relationKz: "–ù–µ–º–µ—Ä–µ –∞—Ç–∞—Å—ã" },
                { id: 10, gen: 10, name: "–ñ–∞–Ω—Ç–µ—Ä–µ–∫", nameEn: "Zhanterek", desc: "10th Generation", descKz: "10-—à—ã “±—Ä–ø–∞“õ", color1: "#e0c3fc", color2: "#8ec5fc", relation: "Great-great grandfather", relationKz: "–ê—Ä“ì—ã –∞—Ç–∞—Å—ã" },
                { id: 11, gen: 11, name: "–¢–æ“ì–∞–π–±–∞–π", nameEn: "Toghaybay", desc: "11th Generation", descKz: "11-—à—ñ “±—Ä–ø–∞“õ", color1: "#f093fb", color2: "#f5576c", relation: "Great grandfather", relationKz: "“Æ–ª–∫–µ–Ω –∞—Ç–∞“£" },
                { id: 12, gen: 12, name: "–ë–∞–π–≥–µ–ª", nameEn: "Baygel", desc: "12th Generation", descKz: "12-—à—ñ “±—Ä–ø–∞“õ", color1: "#4facfe", color2: "#00f2fe", relation: "Grandfather's father", relationKz: "–ê—Ç–∞“£–Ω—ã“£ ”ô–∫–µ—Å—ñ" }
            ],
            currentGeneration: [
                { id: 13, parentId: 12, name: "–ï—Å–±–µ—Ä–≥–µ–Ω", nameEn: "Yesbergen", desc: "Grandfather", descKz: "–ê—Ç–∞–º", color1: "#667eea", color2: "#764ba2", special: "üë¥", relation: "Your Grandfather", relationKz: "–°–µ–Ω—ñ“£ –∞—Ç–∞“£", gen: 13 },
                { id: 14, parentId: 12, name: "–´–¥—ã—Ä—ã—Å", nameEn: "Ydyrys", desc: "Uncle", descKz: "–ê—Ç–∞-—ñ–Ω—ñ“£", color1: "#667eea", color2: "#764ba2", relation: "Grandfather's brother", relationKz: "–ê—Ç–∞“£–Ω—ã“£ —ñ–Ω—ñ—Å—ñ", gen: 13 },
                { id: 15, parentId: 12, name: "–ë–µ–π—Å–µ–Ω", nameEn: "Beysen", desc: "Uncle", descKz: "–ê—Ç–∞-—ñ–Ω—ñ“£", color1: "#667eea", color2: "#764ba2", relation: "Grandfather's brother", relationKz: "–ê—Ç–∞“£–Ω—ã“£ —ñ–Ω—ñ—Å—ñ", gen: 13 }
            ],
            nextGeneration: [
                { id: 16, parentId: 13, name: "–ê–∑–∞–º–∞—Ç", nameEn: "Azamat", desc: "Current Generation", descKz: "“ö–∞–∑—ñ—Ä–≥—ñ “±—Ä–ø–∞“õ", color1: "#f093fb", color2: "#f5576c", special: "üë®", relation: "You/Your Sibling", relationKz: "–°–µ–Ω/–ê“ì–∞“£-—ñ–Ω—ñ“£", gen: 14 },
                { id: 17, parentId: 13, name: "–ê—Ö–º–µ—Ç", nameEn: "Ahmet", desc: "Current Generation", descKz: "“ö–∞–∑—ñ—Ä–≥—ñ “±—Ä–ø–∞“õ", color1: "#f093fb", color2: "#f5576c", special: "üë®", relation: "You/Your Sibling", relationKz: "–°–µ–Ω/–ê“ì–∞“£-—ñ–Ω—ñ“£", gen: 14 },
                { id: 18, parentId: 14, name: "–†–∞—Ö—ã–º", nameEn: "Rakhym", desc: "Cousin", descKz: "–ù–µ–º–µ—Ä–µ –∞“ì–∞“£-—ñ–Ω—ñ“£", color1: "#43e97b", color2: "#38f9d7", relation: "Cousin", relationKz: "–ù–µ–º–µ—Ä–µ –∞“ì–∞“£-—ñ–Ω—ñ“£", gen: 14 },
                { id: 19, parentId: 14, name: "–†–∞—à–∏—Ç", nameEn: "Rashit", desc: "Cousin", descKz: "–ù–µ–º–µ—Ä–µ –∞“ì–∞“£-—ñ–Ω—ñ“£", color1: "#43e97b", color2: "#38f9d7", relation: "Cousin", relationKz: "–ù–µ–º–µ—Ä–µ –∞“ì–∞“£-—ñ–Ω—ñ“£", gen: 14 },
                { id: 20, parentId: 14, name: "–ö–∞–π—Å–∞—Ä", nameEn: "Qaysar", desc: "Cousin", descKz: "–ù–µ–º–µ—Ä–µ –∞“ì–∞“£-—ñ–Ω—ñ“£", color1: "#43e97b", color2: "#38f9d7", relation: "Cousin", relationKz: "–ù–µ–º–µ—Ä–µ –∞“ì–∞“£-—ñ–Ω—ñ“£", gen: 14 },
                { id: 21, parentId: 15, name: "–¢—ã–ª–µ–∫", nameEn: "Tylek", desc: "Cousin", descKz: "–ù–µ–º–µ—Ä–µ –∞“ì–∞“£-—ñ–Ω—ñ“£", color1: "#30cfd0", color2: "#330867", relation: "Cousin", relationKz: "–ù–µ–º–µ—Ä–µ –∞“ì–∞“£-—ñ–Ω—ñ“£", gen: 14 },
                { id: 22, parentId: 15, name: "–ï—Ä–∫—ã–Ω", nameEn: "Yerkyn", desc: "Cousin", descKz: "–ù–µ–º–µ—Ä–µ –∞“ì–∞“£-—ñ–Ω—ñ“£", color1: "#30cfd0", color2: "#330867", relation: "Cousin", relationKz: "–ù–µ–º–µ—Ä–µ –∞“ì–∞“£-—ñ–Ω—ñ“£", gen: 14 }
            ]
        };

        function renderFamilyTree() {
            const container = document.getElementById('familyTree');
            let html = '';

            // Ancestors (1-12)
            html += '<div class="generation-group">';
            html += '<div class="gen-header"><div class="gen-icon">1-12</div><div>–ê—Ç–∞-–±–∞–±–∞–ª–∞—Ä ‚Ä¢ Ancestors (Generations 1-12)</div></div>';
            shezhireData.ancestors.forEach((person, index) => {
                html += `
                    <div class="person-card" style="--card-color-1: ${person.color1}; --card-color-2: ${person.color2}; margin-bottom: 20px;" onclick="showInfo(${person.id}, 'ancestor')">
                        ${person.special ? `<span class="special-badge">${person.special}</span>` : ''}
                        <span class="gen-badge">${person.gen}-—à—ñ “±—Ä–ø–∞“õ ‚Ä¢ Gen ${person.gen}</span>
                        <div class="person-name">${person.name}<span class="person-name-en">${person.nameEn}</span></div>
                        <div class="person-desc">${person.descKz}</div>
                    </div>
                `;
            });
            html += '</div>';

            // Generation 13 - Three brothers with children
            html += '<div class="generation-group">';
            html += '<div class="gen-header"><div class="gen-icon">13</div><div>–ë–∞–π–≥–µ–ª–¥—ñ“£ –±–∞–ª–∞–ª–∞—Ä—ã ‚Ä¢ Children of Baygel (Generation 13)</div></div>';
            
            shezhireData.currentGeneration.forEach(parent => {
                const children = shezhireData.nextGeneration.filter(child => child.parentId === parent.id);
                html += `
                    <div class="family-branch">
                        <div class="connector-line" style="--card-color-1: ${parent.color1}"></div>
                        <div class="parent-card">
                            <div class="person-card" style="--card-color-1: ${parent.color1}; --card-color-2: ${parent.color2}" onclick="showInfo(${parent.id}, 'current')">
                                ${parent.special ? `<span class="special-badge">${parent.special}</span>` : ''}
                                <span class="gen-badge">${parent.gen}-—à—ñ “±—Ä–ø–∞“õ ‚Ä¢ Gen ${parent.gen}</span>
                                <div class="person-name">${parent.name}<span class="person-name-en">${parent.nameEn}</span></div>
                                <div class="person-desc">${parent.descKz}</div>
                            </div>
                        </div>
                        ${children.length > 0 ? `
                            <div class="children-container">
                                ${children.map(child => `
                                    <div class="child-card" style="--card-color-1: ${child.color1}" onclick="showInfo(${child.id}, 'next')">
                                        ${child.special ? `<span style="font-size: 1.5em; margin-bottom: 8px; display: block;">${child.special}</span>` : ''}
                                        <div class="child-name">${child.name}</div>
                                        <div class="child-gen">${child.nameEn}</div>
                                        <div class="child-gen" style="margin-top: 5px; color: #4a5568;">${child.descKz}</div>
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                `;
            });
            html += '</div>';

            container.innerHTML = html;
        }

        function renderList() {
            const container = document.getElementById('listContainer');
            const allPeople = [
                ...shezhireData.ancestors,
                ...shezhireData.currentGeneration,
                ...shezhireData.nextGeneration
            ].sort((a, b) => a.id - a.id);

            container.innerHTML = allPeople.map((person, index) => `
                <div class="list-item" style="--card-color-1: ${person.color1}; --card-color-2: ${person.color2}; animation-delay: ${index * 0.02}s" onclick="showInfoFromList(${person.id})">
                    <div class="list-number">${person.id}</div>
                    <div class="list-content">
                        <div class="list-name">${person.name} ${person.special || ''}</div>
                        <div class="list-desc">${person.nameEn} ‚Ä¢ ${person.descKz}</div>
                    </div>
                </div>
            `).join('');
        }

        function showInfo(id, type) {
            let person;
            if (type === 'ancestor') {
                person = shezhireData.ancestors.find(p => p.id === id);
            } else if (type === 'current') {
                person = shezhireData.currentGeneration.find(p => p.id === id);
            } else {
                person = shezhireData.nextGeneration.find(p => p.id === id);
            }

            if (!person) return;

            const panel = document.getElementById('infoPanel');
            const content = document.getElementById('infoPanelContent');
            
            content.innerHTML = `
                <div class="info-header">
                    <h2 class="info-title">${person.name} ${person.special || ''}</h2>
                    <div class="info-badge" style="--info-color-1: ${person.color1}; --info-color-2: ${person.color2}">
                        ${person.gen ? `${person.gen}-—à—ñ “±—Ä–ø–∞“õ ‚Ä¢ Generation ${person.gen}` : 'Generation 14'}
                    </div>
                </div>

                <div class="info-section" style="--info-color-1: ${person.color1}">
                    <div class="info-label">“ö–∞–∑–∞“õ—à–∞ –∞—Ç—ã ‚Ä¢ Kazakh Name</div>
                    <div class="info-value">${person.name}</div>
                </div>

                <div class="info-section" style="--info-color-1: ${person.color1}">
                    <div class="info-label">English Name</div>
                    <div class="info-value">${person.nameEn}</div>
                </div>

                <div class="info-section" style="--info-color-1: ${person.color1}">
                    <div class="info-label">–¢—É—ã—Å—Ç—ã“õ “õ–∞—Ç—ã–Ω–∞—Å—ã ‚Ä¢ Relation</div>
                    <div class="info-value">${person.relationKz}<br>${person.relation}</div>
                </div>

                <div class="info-section" style="--info-color-1: ${person.color1}">
                    <div class="info-label">–°–∏–ø–∞—Ç—Ç–∞–º–∞ ‚Ä¢ Description</div>
                    <div class="info-value">${person.descKz}<br>${person.desc}</div>
                </div>

                <div class="info-section" style="--info-color-1: ${person.color1}">
                    <div class="info-label">–†“± ‚Ä¢ Tribe</div>
                    <div class="info-value">–î—É–ª–∞—Ç ‚Ä¢ Dulat</div>
                </div>

                <div class="info-section" style="--info-color-1: ${person.color1}">
                    <div class="info-label">–ñ“Ø–∑ ‚Ä¢ Zhuz</div>
                    <div class="info-value">“∞–ª—ã –∂“Ø–∑ ‚Ä¢ Uly Zhuz (Senior Zhuz)</div>
                </div>

                <div class="info-section" style="--info-color-1: ${person.color1}">
                    <div class="info-label">”®“£—ñ—Ä ‚Ä¢ Region</div>
                    <div class="info-value">–ñ–∞–º–±—ã–ª –æ–±–ª—ã—Å—ã, “ö–æ—Ä–¥–∞–π –∞—É–¥–∞–Ω—ã<br>Zhambyl region, Kordai district</div>
                </div>

                ${person.id === 1 ? `
                    <div class="info-section" style="--info-color-1: ${person.color1}; background: linear-gradient(135deg, ${person.color1}15, ${person.color2}15);">
                        <div class="info-label">üèõÔ∏è –¢–∞—Ä–∏—Ö–∏ –º–∞“£—ã–∑—ã ‚Ä¢ Historical Significance</div>
                        <div class="info-value">
                            –î—É–ª–∞—Ç - “∞–ª—ã –∂“Ø–∑–¥—ñ“£ –µ“£ —ñ—Ä—ñ —Ç–∞–π–ø–∞–ª–∞—Ä—ã–Ω—ã“£ –±—ñ—Ä—ñ, –º”ô–¥–µ–Ω–∏ –Ω”ô–∑—ñ–∫—Ç—ñ–≥—ñ –∂”ô–Ω–µ –µ–≥—ñ–Ω—à—ñ–ª—ñ–∫ —Ç”ô–∂—ñ—Ä–∏–±–µ—Å—ñ–º–µ–Ω —Ç–∞–Ω—ã–º–∞–ª.
                            <br><br>
                            Dulat is one of the largest tribes of Uly Zhuz, historically known for cultural refinement and agricultural expertise in the Zhetysu region.
                        </div>
                    </div>
                ` : ''}

                ${person.id === 13 ? `
                    <div class="info-section" style="--info-color-1: ${person.color1}; background: linear-gradient(135deg, ${person.color1}15, ${person.color2}15);">
                        <div class="info-label">üë¥ –ï—Å–∫–µ—Ä—Ç—É ‚Ä¢ Note</div>
                        <div class="info-value">
                            –ï—Å–±–µ—Ä–≥–µ–Ω - —Å–µ–Ω—ñ“£ –∞—Ç–∞“£. –û–Ω—ã“£ –µ–∫—ñ –±–∞–ª–∞—Å—ã: –ê–∑–∞–º–∞—Ç –∂”ô–Ω–µ –ê—Ö–º–µ—Ç.
                            <br><br>
                            Yesbergen is your grandfather. He has two children: Azamat and Ahmet.
                        </div>
                    </div>
                ` : ''}
            `;
            
            panel.classList.add('active');
            panel.style.setProperty('--info-color-1', person.color1);
            panel.style.setProperty('--info-color-2', person.color2);
        }

        function showInfoFromList(id) {
            let person = shezhireData.ancestors.find(p => p.id === id);
            let type = 'ancestor';
            
            if (!person) {
                person = shezhireData.currentGeneration.find(p => p.id === id);
                type = 'current';
            }
            if (!person) {
                person = shezhireData.nextGeneration.find(p => p.id === id);
                type = 'next';
            }

            if (person) {
                showInfo(id, type);
            }
        }

        function switchView(view) {
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            document.querySelectorAll('.family-view, .list-view').forEach(v => v.classList.remove('active'));
            document.querySelector(`.${view}-view`).classList.add('active');
        }

        function closeInfo() {
            document.getElementById('infoPanel').classList.remove('active');
        }

        function downloadShezhire() {
            let content = "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
            content += "              –ú–ï–ù–Ü“¢ –®–ï–ñ–Ü–†–ï–ú - MY KAZAKH SHEZHIRE\n";
            content += "                    –ñ–µ—Ç—ñ –ê—Ç–∞ - Seven Ancestors\n";
            content += "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";
            content += "–î—É–ª–∞—Ç —Ä—É—ã - Dulat Tribe\n";
            content += "“∞–ª—ã –∂“Ø–∑ - Uly Zhuz (Senior Zhuz)\n";
            content += "–ñ–∞–º–±—ã–ª –æ–±–ª—ã—Å—ã, “ö–æ—Ä–¥–∞–π –∞—É–¥–∞–Ω—ã - Zhambyl region, Kordai district\n\n";
            content += "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";
            
            content += "–ê–¢–ê-–ë–ê–ë–ê–õ–ê–† ‚Ä¢ ANCESTORS (Generations 1-12)\n";
            content += "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n";
            shezhireData.ancestors.forEach(person => {
                content += `${person.gen}-—à—ñ “±—Ä–ø–∞“õ | Generation ${person.gen}\n`;
                content += `   –ê—Ç—ã: ${person.name} (${person.nameEn})\n`;
                content += `   –¢—É—ã—Å—Ç—ã“õ: ${person.relationKz} | ${person.relation}\n`;
                content += `   –°–∏–ø–∞—Ç—Ç–∞–º–∞: ${person.descKz}\n\n`;
            });

            content += "\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";
            content += "–ë–ê–ô–ì–ï–õ–î–Ü“¢ –ë–ê–õ–ê–õ–ê–†–´ ‚Ä¢ CHILDREN OF BAYGEL (Generation 13)\n";
            content += "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n";
            
            shezhireData.currentGeneration.forEach(parent => {
                content += `\n${parent.name} (${parent.nameEn}) - ${parent.descKz}\n`;
                const children = shezhireData.nextGeneration.filter(child => child.parentId === parent.id);
                if (children.length > 0) {
                    content += `   –ë–∞–ª–∞–ª–∞—Ä—ã ‚Ä¢ Children:\n`;
                    children.forEach(child => {
                        content += `   ‚Üí ${child.name} (${child.nameEn}) - ${child.descKz}\n`;
                    });
                }
                content += '\n';
            });

            content += "\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
            content += "–°–¢–ê–¢–ò–°–¢–ò–ö–ê ‚Ä¢ STATISTICS\n";
            content += "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n";
            content += `–ë–∞—Ä–ª—ã“õ –∞–¥–∞–º–¥–∞—Ä ‚Ä¢ Total People: 22\n`;
            content += `“∞—Ä–ø–∞“õ—Ç–∞—Ä —Å–∞–Ω—ã ‚Ä¢ Number of Generations: 14\n`;
            content += `–¢–∞—Ä–º–∞“õ—Ç–∞—Ä ‚Ä¢ Family Branches: 3\n\n`;
            content += "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
            content += `–ñ–∞—Å–∞–ª“ì–∞–Ω –∫“Ø–Ω—ñ ‚Ä¢ Generated: ${new Date().toLocaleDateString('kk-KZ')} | ${new Date().toLocaleDateString()}\n`;
            content += "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
            
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = '–ú–µ–Ω—ñ“£_–®–µ–∂—ñ—Ä–µ–º_My_Shezhire.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('‚úÖ –®–µ–∂—ñ—Ä–µ –∂“Ø–∫—Ç–µ–ª–¥—ñ! ‚Ä¢ Shezhire downloaded!');
        }

        function shareShezhire() {
            const text = `üå≥ –ú–µ–Ω—ñ“£ –®–µ–∂—ñ—Ä–µ–º - My Kazakh Shezhire

–î—É–ª–∞—Ç —Ä—É—ã, “∞–ª—ã –∂“Ø–∑
Dulat tribe, Uly Zhuz

${shezhireData.ancestors[0].name} –±–∞—Å—Ç–∞–ø ${shezhireData.nextGeneration[0].name} –¥–µ–π—ñ–Ω
From ${shezhireData.ancestors[0].name} to current generation

üìä 22 –∞–¥–∞–º ‚Ä¢ 14 “±—Ä–ø–∞“õ ‚Ä¢ 3 —Ç–∞—Ä–º–∞“õ
22 people ‚Ä¢ 14 generations ‚Ä¢ 3 branches

üìç ”®“£—ñ—Ä: –ñ–∞–º–±—ã–ª –æ–±–ª—ã—Å—ã, “ö–æ—Ä–¥–∞–π
Region: Zhambyl, Kordai`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'üå≥ –ú–µ–Ω—ñ“£ –®–µ–∂—ñ—Ä–µ–º - My Kazakh Shezhire',
                    text: text
                }).catch(err => {
                    if (err.name !== 'AbortError') {
                        copyToClipboard(text);
                    }
                });
            } else {
                copyToClipboard(text);
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('‚úÖ –®–µ–∂—ñ—Ä–µ –∞“õ–ø–∞—Ä–∞—Ç—ã –∫”©—à—ñ—Ä—ñ–ª–¥—ñ! ‚Ä¢ Shezhire info copied to clipboard!');
            }).catch(err => {
                console.error('Copy failed:', err);
                alert('‚ùå –ö”©—à—ñ—Ä—É —Å”ô—Ç—Å—ñ–∑ –∞—è“õ—Ç–∞–ª–¥—ã ‚Ä¢ Copy failed');
            });
        }

        function printShezhire() {
            window.print();
        }

        // Initialize
        renderFamilyTree();
        renderList();

        // Close info panel when clicking outside
        document.addEventListener('click', function(event) {
            const panel = document.getElementById('infoPanel');
            if (panel.classList.contains('active') && 
                !panel.contains(event.target) && 
                !event.target.closest('.person-card, .child-card, .list-item')) {
                closeInfo();
            }
        });

        // Prevent closing when clicking inside panel
        document.getElementById('infoPanel').addEventListener('click', function(event) {
            event.stopPropagation();
        });
    </script>
</body>
</html>
